(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a365f7c4"],{"10d2":function(t,e,a){"use strict";var i=a("8dd9");e["a"]=i["a"]},"2fa4":function(t,e,a){"use strict";a("20f6");var i=a("80d2");e["a"]=Object(i["h"])("spacer","div","v-spacer")},"4bd4":function(t,e,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("caad"),a("07ac"),a("2532"),a("159b");var i=a("5530"),n=a("58df"),r=a("7e2b"),s=a("3206");e["a"]=Object(n["a"])(r["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},afdd:function(t,e,a){"use strict";var i=a("8336");e["a"]=i["a"]},c1f9:function(t,e,a){var i=a("23e7"),n=a("2266"),r=a("8418");i({target:"Object",stat:!0},{fromEntries:function(t){var e={};return n(t,(function(t,a){r(e,t,a)}),{AS_ENTRIES:!0}),e}})},c3f0:function(t,e,a){"use strict";a("4160"),a("159b");var i=a("80d2"),n=function(t){var e=t.touchstartX,a=t.touchendX,i=t.touchstartY,n=t.touchendY,r=.5,s=16;t.offsetX=a-e,t.offsetY=n-i,Math.abs(t.offsetY)<r*Math.abs(t.offsetX)&&(t.left&&a<e-s&&t.left(t),t.right&&a>e+s&&t.right(t)),Math.abs(t.offsetX)<r*Math.abs(t.offsetY)&&(t.up&&n<i-s&&t.up(t),t.down&&n>i+s&&t.down(t))};function r(t,e){var a=t.changedTouches[0];e.touchstartX=a.clientX,e.touchstartY=a.clientY,e.start&&e.start(Object.assign(t,e))}function s(t,e){var a=t.changedTouches[0];e.touchendX=a.clientX,e.touchendY=a.clientY,e.end&&e.end(Object.assign(t,e)),n(e)}function o(t,e){var a=t.changedTouches[0];e.touchmoveX=a.clientX,e.touchmoveY=a.clientY,e.move&&e.move(Object.assign(t,e))}function c(t){var e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:function(t){return r(t,e)},touchend:function(t){return s(t,e)},touchmove:function(t){return o(t,e)}}}function l(t,e,a){var n=e.value,r=n.parent?t.parentElement:t,s=n.options||{passive:!0};if(r){var o=c(e.value);r._touchHandlers=Object(r._touchHandlers),r._touchHandlers[a.context._uid]=o,Object(i["t"])(o).forEach((function(t){r.addEventListener(t,o[t],s)}))}}function u(t,e,a){var n=e.value.parent?t.parentElement:t;if(n&&n._touchHandlers){var r=n._touchHandlers[a.context._uid];Object(i["t"])(r).forEach((function(t){n.removeEventListener(t,r[t])})),delete n._touchHandlers[a.context._uid]}}var d={inserted:l,unbind:u};e["a"]=d},d903:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var i=a("ade3"),n=a("4e82"),r=a("58df"),s=a("d9bd"),o=a("2b0e"),c=o["a"].extend({props:{activeClass:String,value:{required:!1}},data:function(){return{isActive:!1}},methods:{toggle:function(){this.isActive=!this.isActive}},render:function(){return this.$scopedSlots.default?(this.$scopedSlots.default&&(t=this.$scopedSlots.default({active:this.isActive,toggle:this.toggle})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(t.data=this._b(t.data||{},t.tag,{class:Object(i["a"])({},this.activeClass,this.isActive)}),t):(Object(s["c"])("v-item should only contain a single element",this),t)):(Object(s["c"])("v-item is missing a default scopedSlot",this),null);var t}});e["b"]=Object(r["a"])(c,Object(n["a"])("itemGroup","v-item","v-item-group")).extend({name:"v-item"})},eaad:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SectionPage",[a("v-sheet",{staticClass:"fill-height",attrs:{color:"#eee0"}},[a("v-container",{attrs:{"grid-list-xs":""}},[a("v-row",{staticClass:"mt-12"},[a("v-col",{staticClass:"d-flex"},[a("v-spacer"),a("v-dialog",{attrs:{scrollable:"","max-width":"650px",transition:"dialog-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{color:"blue",dark:"",elevation:"1"}},i),[t._v(" إنشاء رسالة جديدة + ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[t._v(" رسالة جديدة ")]),a("v-card-text",[a("MessageForm")],1)],1)],1)],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("v-slide-group",{staticStyle:{"background-color":"#fff"},on:{change:t.getAll},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-slide-item",{attrs:{value:4},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.active,n=e.toggle;return[a("v-btn",{attrs:{tile:"",color:i?"#3B86FF":"#fff",outlined:i},on:{click:n}},[t._v(" رسائل الادارة ")])]}}])}),a("v-slide-item",{attrs:{value:2},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.active,n=e.toggle;return[a("v-btn",{attrs:{tile:"",color:i?"#3B86FF":"#fff",outlined:i},on:{click:n}},[t._v(" رسائل المدربين ")])]}}])})],1)],1),a("v-col",{staticClass:"mt-n3",attrs:{cols:"12"}},[a("v-card",[a("v-layout",{attrs:{row:"",warp:""}},[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-list",[a("v-subheader",[a("v-spacer"),a("v-btn",{attrs:{block:"",tile:"",elevation:"0",dark:"",small:"",color:"blue",loading:t.isloading},on:{click:t.getAll}},[a("v-icon",{attrs:{small:""}},[t._v(" fa-repeat ")])],1)],1),t.data.results.length?t._e():a("v-subheader",{staticClass:"text-center mx-0"},[t._v(" No Messages ")]),a("v-list-item-group",{attrs:{color:"grey darken-4"}},[t._l(t.data.results,(function(e){return[a("v-list-item",{key:e.id,attrs:{link:"",dense:"","three-line":"","active-class":""},on:{click:function(a){return t.activeMessage(e)}}},[a("v-list-item-avatar",{attrs:{tile:"",color:"blue",size:"40"}},[t._v(" "+t._s(e.sender.fullname[0])+" ")]),a("v-list-item-content",[e.sender&&e.sender.id!=t.$store.state.auth.user.id?a("v-list-item-title",[t._v(" "+t._s(e.sender.fullname)+" ")]):a("v-list-item-title",[e.receiver&&4!=t.tab?[t._v(" "+t._s(e.receiver.fullname)+" ")]:[t._v(" الى الادارة ")]],2),a("v-list-item-subtitle",{staticClass:"text-truncate"},[t._v(" "+t._s(e.title)+" ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.moment(e.create_at).fromNow())+" ")])],1)],1)]}))],2)],1)],1),a("v-col",{class:{"order-first":t.$vuetify.breakpoint.smAndDown},attrs:{cols:"12",md:"8"}},[t.activeMessage?a("v-card",{staticClass:"px-md-12 py-6",attrs:{flat:"",dir:"auto"}},[t.$vuetify.breakpoint.smAndDown?a("v-card-title",{staticClass:"justify-end",on:{click:function(e){return t.activeMessage({})}}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v(" fa-close ")])],1)],1):t._e(),a("v-card-text",{staticStyle:{"white-space":"pre-wrap"}},[a("h1",{staticClass:"text-capitalize px-0 mx-0"},[t._v(" "+t._s(t.active.title)+" ")]),a("h4",{staticClass:"mt-4 mx-3"},[t._v(t._s(t.active.text))]),a("v-card-text",[t._l(t.active.replies,(function(e){return a("v-alert",{key:e.id,attrs:{tile:"",border:"right","colored-border":"",dense:"",color:e.user.id!=t.active.sender.id?"blue":"success",elevation:"0"}},[t._v(t._s(e.text)+" "),a("br"),a("small",{staticClass:"grey--text text--light-2"},[t._v(" @"+t._s(e.user.fullname))]),a("small",{staticClass:"grey--text text--darken-4"},[t._v(" "+t._s(t.moment(e.create_at).fromNow())+" ")])])})),t.active.id?a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-form",{ref:"replyForm",on:{submit:function(e){return e.preventDefault(),t.submitReply(e)}}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{"hide-details":"",name:"text",outlined:"","auto-grow":""}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{staticClass:"mt-2",attrs:{dark:"",loading:t.replyLoading,color:"blue",type:"submit",title:"Reply",elevation:"0"}},[t._v(" ارسال ")])],1)],1)],1)],1):t._e()],2)],1)],1):t._e()],1)],1)],1)],1)],1)],1)],1)],1)},n=[],r=(a("c1f9"),a("d3b7"),a("5530")),s=a("2f62"),o=function(){return a.e("chunk-40f39765").then(a.bind(null,"bbf6"))},c=function(){return Promise.all([a.e("chunk-b1deb7e4"),a.e("chunk-499330d0"),a.e("chunk-2d217c89")]).then(a.bind(null,"c7cb"))},l={components:{SectionPage:o,MessageForm:c},data:function(){return{tab:4,show:null,active:{},reply:!1,replyLoading:!1,dialog:!1}},watch:{tab:function(){this.active={}}},methods:{getAll:function(){this.$store.dispatch("model/sendReq",{url:"chat/me?role=".concat(this.tab),method:"all"})},activeMessage:function(t){this.active=t},submitReply:function(){var t=this,e=new FormData(this.$refs.replyForm.$el);this.replyLoading=!0,this.$store.dispatch("model/sendReq",{url:"chat/reply/".concat(this.active.id),method:"create",item:JSON.stringify(Object.fromEntries(e))}).then((function(e){var a=e.data;t.active.replies.push(a),t.$refs.replyForm.reset()})).finally((function(){return t.replyLoading=!1}))}},computed:Object(r["a"])({},Object(s["b"])("model",{data:function(t){return t.data},isloading:function(t){return t.isloading}})),created:function(){this.getAll()}},u=l,d=a("2877"),v=a("6544"),f=a.n(v),h=a("0798"),m=a("8336"),b=a("b0af"),p=a("99d9"),g=a("62ad"),_=a("a523"),y=a("169a"),w=a("4bd4"),x=a("132d"),V=a("a722"),k=a("8860"),O=a("da13"),j=a("8270"),C=a("5d23"),S=a("1baa"),$=a("0fd9"),A=a("8dd9"),E=a("7efd"),B=a("d903"),X=a("4e82"),Y=a("58df"),L=Object(Y["a"])(B["a"],Object(X["a"])("slideGroup")).extend({name:"v-slide-item"}),F=a("2fa4"),I=a("e0c7"),M=a("a844"),T=Object(d["a"])(u,i,n,!1,null,null,null);e["default"]=T.exports;f()(T,{VAlert:h["a"],VBtn:m["a"],VCard:b["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:g["a"],VContainer:_["a"],VDialog:y["a"],VForm:w["a"],VIcon:x["a"],VLayout:V["a"],VList:k["a"],VListItem:O["a"],VListItemAvatar:j["a"],VListItemContent:C["a"],VListItemGroup:S["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VRow:$["a"],VSheet:A["a"],VSlideGroup:E["b"],VSlideItem:L,VSpacer:F["a"],VSubheader:I["a"],VTextarea:M["a"]})}}]);